(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(4186)}])},4186:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return j}});var n=r(4051),s=r.n(n),a=r(5893),u=r(1664),c=r.n(u),l=r(5152),i=r.n(l),o=r(7294),d=r(956),f=r(8101);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,s,a,u){try{var c=e[a](u),l=c.value}catch(i){return void r(i)}c.done?t(l):Promise.resolve(l).then(n,s)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function u(e){m(a,n,s,u,c,"next",e)}function c(e){m(a,n,s,u,c,"throw",e)}u(void 0)}))}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=i()(r.e(623).then(r.bind(r,7623)),{loadableGenerated:{webpack:function(){return[7623]}},ssr:!1}),j=!0;t.default=function(e){var t=e.data,r=(0,o.useState)("load"),n=r[0],u=r[1],l=(0,d.Z)(),i=(0,o.useState)("search_contena"),h=i[0],m=i[1],j=(0,o.useState)(0),b=j[0],y=j[1],w=((0,o.useContext)(f.vi),(0,o.useContext)(f.gd)),N=(w.state,w.dispatch),S=t.results,g=S.results_available,k=void 0===g?0:g,O=S.results_start,E=void 0===O?1:O,P=S.results_returned,A=void 0===P?1:P,C=S.shop,T=void 0===C?[]:C,D=_(new Map(t.results.shop.map((function(e){return[e.small_area.code,e]}))).values()),I=(0,o.useState)(T),U=I[0],q=I[1],G=(0,o.useState)({results_available:k,results_returned:A,results_start:E}),L=G[0],M=G[1],R=(0,o.useState)(""),X=R[0],F=R[1],Z=(0,o.useState)(""),$=Z[0],z=Z[1],B=(0,o.useState)(""),H=B[0],J=B[1],K=(0,o.useState)("10"),Q=K[0],V=K[1];(0,o.useEffect)((function(){"\u5834\u6240\u3092\u9078\u629e"==$&&z(""),u("load show");var e=new URLSearchParams({keyword:X,small_area:$,order:H}),t=function(){var t=p(s().mark((function t(){var r,n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/next_hisa/api/search?".concat(e));case 3:return r=t.sent,t.next=6,r.json();case 6:n=t.sent,a=n.users.results,M({results_available:a.results_available,results_returned:a.results_returned,results_start:a.results_start}),q(a.shop),u("load hide"),t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return");case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();t(),N("returnTop")}),[X,$,H]),(0,o.useEffect)((function(){if(1!==L.results_start){var e=L.results_start+10,t={start:L.results_start,keyword:X,small_area:$,order:H,count:Q},r=new URLSearchParams(t);V(e),u("load ver2 show");var n=function(){var e=p(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/next_hisa/api/search/?".concat(r));case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,a=n.users.results,M({results_available:a.results_available,results_returned:a.results_returned,results_start:a.results_start}),1!==a.results_start){e.next=12;break}return q(a.shop),e.abrupt("return");case 12:q((function(e){return _(e).concat(_(a.shop))})),u("load hide"),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();n()}}),[L.results_start]),(0,o.useEffect)((function(){m(l>b?"search_contena search_contena_none":"search_contena"),y(l)}),[l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:h,children:[(0,a.jsx)("p",{className:n}),(0,a.jsx)("div",{className:"inner",children:(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget,r=void 0===t?{}:t,n=Array.from(null===r||void 0===r?void 0:r.elements),s=n.find((function(e){return"query"===e.name})),a=n.find((function(e){return"small_area"===e.name})),u=s.value||"",c=a.value||"";F(u),z(c)},children:[(0,a.jsx)("p",{className:"unit",children:(0,a.jsx)("input",{type:"search",name:"query",placeholder:"\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"})}),(0,a.jsx)("p",{className:"unit",children:(0,a.jsxs)("select",{name:"small_area",children:[(0,a.jsx)("option",{children:"\u5834\u6240\u3092\u9078\u629e"},"0"),D.map((function(e){return(0,a.jsx)("option",{value:e.small_area.code,children:e.small_area.name},e.small_area.code)}))]})}),(0,a.jsx)("p",{className:"unit",children:(0,a.jsx)("button",{children:"\u691c\u7d22"})})]})})]}),(0,a.jsxs)("section",{className:"main_contena",children:[(0,a.jsxs)("section",{className:"search_contena_02",children:[(0,a.jsxs)("div",{className:"num",children:[L.results_available,(0,a.jsx)("span",{children:"\u4ef6"})]}),(0,a.jsxs)("select",{name:"order",onChange:function(e){e.preventDefault();var t=e.target.value;J(t)},children:[(0,a.jsx)("option",{value:"4",children:"\u304a\u30b9\u30b9\u30e1\u9806"}),(0,a.jsx)("option",{value:"1",children:"\u5e97\u540d\u304b\u306a\u9806"})]})]}),(0,a.jsx)("ul",{className:"item_list",children:U.map((function(e,t){return(0,a.jsx)(x,{move:"bottom",children:(0,a.jsx)("li",{className:"unit",children:(0,a.jsx)(c(),{href:"/details/".concat(e.id),children:(0,a.jsxs)("a",{children:[(0,a.jsx)("div",{className:"img",children:(0,a.jsx)("img",{src:e.photo.pc.m,alt:e.name})}),(0,a.jsxs)("div",{className:"txt",children:[(0,a.jsx)("p",{className:"name",children:e.name}),(0,a.jsxs)("p",{className:"access",children:["\u30a2\u30af\u30bb\u30b9\uff1a",e.access]}),(0,a.jsxs)("p",{className:"open",children:["\u55b6\u696d\u6642\u9593\uff1a",e.open]})]})]})})},t)})}))}),(0,a.jsx)("div",{className:"more_content",children:L.results_returned<10?(0,a.jsx)("div",{}):(0,a.jsx)("div",{className:"btn_more",children:(0,a.jsx)("button",{onClick:function(){M((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){v(e,t,r[t])}))}return e}({},e,{results_start:e.results_start+10})}))},children:"\u3082\u3063\u3068\u898b\u308b"})})}),0===L.results_available?(0,a.jsx)("div",{className:"no_item",children:"\u691c\u7d22\u5bfe\u8c61\u306e\u304a\u5e97\u306f\u3042\u308a\u307e\u305b\u3093"}):(0,a.jsx)("div",{})]})]})}}},function(e){e.O(0,[152,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);